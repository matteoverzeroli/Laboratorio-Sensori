\chapter{Laboratorio 15/11/22}
In questa esperienza di laboratorio, si è presentata la board Arduino Nano 33 BLE Sense, una piattaforma open-source che integra diversi sensori e ne facilita l'utilizzo. In particolare, la piattaforma è dotata dei seguenti sensori (\Fig\ref{fig:arduino}):
\begin{itemize}
	\item LSM9DS1, una \textit{insertial measurement unit} (IMU) a 9 assi che integra un accelerometro, un giroscopio e un magnetometro;
	\item LPS22HB che integra un barometro e un sensore di temperatura;
	\item HTS221, un sensore di umidità relativa;
	\item APDS-9960 che può essere usato come sensore di prossimità, luce ambientale, sensore RBG e movimenti;
	\item MP34DT05, un microfono digitale.
\end{itemize}
\begin{figure}[b!]
	\centering
	\includegraphics[width=0.8\linewidth]{./ImageFiles/arduino.png}
	\caption{Arduino Nano 33 BLE Sense, vista top. U1:NINA-B306 Module Bluetooth® Low Energy 5.0 Module, U2:LSM9DS1TR Sensor IMU, U3:MP34DT06JTR Mems Microphone, U4:ATECC608A Crypto chip, U5:APDS-9660 Ambient Module, U6:MP2322GQH Step Down Converter, PB1:IT-1185AP1C-160G-GTR Push button, HS-1:HTS221 Humidity Sensor, DL1:Led L, DL2: Led Power.}
	\label{fig:arduino}
\end{figure}
Inoltre, è presente un chip per la crittografia ATECC608A e un convertitore DC-DC MPM3610. Il microprocessore è integrato nel modulo NINA B306 (\SI{64}{\mega\hertz} Arm Cortex-M4F) che fornisce anche un modulo Bluetooth 5, con supporto multiprotocollo. La board viene alimentata con una tensione di \SI{3.3}{\volt}. Tipicamente l'alimentazione è fornita tramite la porta USB che viene anche utilizzata per il caricamento del firmware tramite l'Arduino IDE.

Si è testato il funzionamento dell'accelerometro tramite il seguente sketch che permette di ricavare le misure delle accelerazioni proprie dall'accelerometro. Di seguito si riporta il codice del firmware caricato sulla board tramite l'Arudino IDE. In particolare, le misure sono ricavate dal buffer dell'accelerometro e sono poi scritte sulla porta seriale secondo il formato "{x} {y} {z}".
\lstinputlisting[language=c]{./OtherFiles/firmware.c}

Inoltre, è possibile visualizzare graficamente i dati scritti sulla porta seriale tramite il \textit{Serial Plotter} fornito dall'ambiente di sviluppo di Arduino. Nella figura \ref{fig:serial_plotter} è possibile vedere un esempio di acquisizione dei dati, in cui l'arduino viene tenuto fermo su un piano. In queste condizioni si noti che l'unica accelerazione misurata è l'accelerazione di gravità con un valore misurato pari a circa \SI{9.9}{\meter \per \second^2}
\begin{figure}[tbh]
	\centering
	\begin{minipage}{.45\textwidth}
		\includegraphics[width=\linewidth]{./ImageFiles/fermo.jpg}
	\end{minipage}
	\begin{minipage}{.45\textwidth}
		\includegraphics[width=\linewidth]{./ImageFiles/testa in giù.jpg}
	\end{minipage}
	\caption{Grafici di alcune misure dell'accelerometro. Nelle immagini si può notare l'accelerazione di gravità misurata sull'asse z con segno positivo (immagine a sinistra) e segno negativo (immagine a destra).}
	\label{fig:serial_plotter}
\end{figure}